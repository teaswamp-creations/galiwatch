
```{r, preamble, message=F, warning=F, echo = F}
library(bsplus)
library(htmltools)
library(googlesheets4)
library(dplyr)
gs4_deauth()
use_bs_popover()

# popovers
pop_gloss <- function(id, nocaps=F){
  # a is a list of text, dest, details
  row = subset(gloss, title == id)
  name = row['title']
  if(nocaps){name = tolower(name)}
  htmltools::tags$button(name, class='btn-gloss') %>%
  bs_embed_popover(content = paste0(strong(row['title']), strong(": "), row['details']),
                   trigger="hover", placement = 'bottom', html = T)
}

make_anchor <- function(id){a(id = id, class = 'anchor')}

```

```{r gloss, message=F, warning=F, echo = F}
# get glossary entries
sheet_id <- readLines('.sheet_id')
read_sheet(sheet_id, sheet = 'glossary') %>%
  subset(complete.cases((.))) %>%
  mutate(dest = paste0('glossary.html#', gsub(" ", "%20", title))) ->
  gloss

```


I love a good `r pop_gloss("Biogeoclimatic zone")`!  
Hello [I am a link]()